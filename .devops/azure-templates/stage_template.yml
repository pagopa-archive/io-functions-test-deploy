
parameters:
  - name: 'deploySDK'
    type: boolean
    default: False

  - name: 'dependsOn'
    type: object
    default: []

  - name: 'isBranchMaster'
    default:  $[ eq(variables['Build.SourceBranch'], 'refs/heads/master') ]

  - name: 'setVariableToA'
    type: boolean

stages:

- stage: Deploy_SDK
  dependsOn: ${{parameters.dependsOn}}
  condition: eq(variables.deploySDK, true)
  jobs:
  - job: B1
    steps:
      - script: echo Hello Stage B!
      - script: echo $(deploySDK) $(isBranchMaster)

- stage: Deploy_SDK_2
  dependsOn: []
  
  variables: 
    myVariable: $[if(variables.setVariableToA, 'AAA', 'BBB'])]

  jobs:
  - job: B2
    steps:
      - script: echo Hello ${{ variables.myVariable }}!
        condition: eq(variables.isBranchMaster, false)